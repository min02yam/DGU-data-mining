/*후보변수 선택한 파일 불러오기*/
FILENAME REFFILE '/folders/myfolders/final_colpt_final3.csv'; 
PROC IMPORT DATAFILE=REFFILE
DBMS=CSV  
OUT=final_colpt_final3;
GETNAMES=YES;
RUN;

/*Train set, Test set 분할*/
data final4;
set final4;
if ranuni(0049)<0.7 then splitwgt = smp_wgt;
else splitwgt = .;
records = 1;
run;

/*backward*/
proc logistic data=final4 descending;
weight splitwgt;
model 
CARAVAN=MOSTYPE	MAANTHUI	MGEMOMV	MOSHOOFD	MRELOV	MFGEKIND	MOPLLAAG	MSKD	MHHUUR	
MHKOOP	MZFONDS	MZPART	MINK3045	MINK123M	MINKGEM	PWAPART	PWALAND	PPERSAUT	PMOTSCO	PAANHANG
	PBROM	PLEVEN	PGEZONG	PWAOREG	PBRAND	PFIETS	PINBOED	PBYSTAND	AWAPART	AWALAND	APERSAUT
	AMOTSCO	AAANHANG	ATRACTOR	ABROM	AGEZONG	AWAOREG	ABRAND	AZEILPL	APLEZIER	AFIETS
	AINBOED	ABYSTAND	MGEMLEEF1	MGEMLEEF2	MGEMLEEF34	MGEMLEEF5	MGEMLEEF6	MGODRK0	MGODRK1
	MGODRK2	MGODRK34	MGODRK5	MGODRK6	MGODRK7	MGODRK9	MGODPR01	MGODPR2	MGODPR34	
	MGODPR5	MGODPR6	MGODPR7	MGODPR8	MGODPR9	MGODOV0	MGODOV1	MGODOV23	MGODOV4	MGODOV5	MGODGE0	
	MGODGE1	MGODGE2	MGODGE3	MGODGE45	MGODGE6	MGODGE7	MGODGE8	MRELGE0	MRELGE1	MRELGE2	MRELGE3	
	MRELGE4	MRELGE5	MRELGE67	MRELGE8	MRELGE9	MRELSA0	MRELSA12	MRELSA3	MRELSA4	MRELSA56
	MFALLEEN01	MFALLEEN2	MFALLEEN3	MFALLEEN45	MFALLEEN6	MFALLEEN7	MFALLEEN8	MFALLEEN9
	MFWEKIND0	MFWEKIND1	MFWEKIND23	MFWEKIND4	MFWEKIND5	MFWEKIND6	MFWEKIND7	MFWEKIND8
	MFWEKIND9	MOPLHOOG01	MOPLHOOG2	MOPLHOOG3	MOPLHOOG4	MOPLHOOG5	MOPLHOOG6	MOPLHOOG7
	MOPLHOOG8	MOPLHOOG9	MOPLMIDD0	MOPLMIDD1	MOPLMIDD234	MOPLMIDD5	MOPLMIDD6	MOPLMIDD7
	MOPLMIDD8	MOPLMIDD9	MBERHOOG01	MBERHOOG2	MBERHOOG3	MBERHOOG4	MBERHOOG5	MBERHOOG6
	MBERHOOG7	MBERHOOG8	MBERHOOG9	MBERZELF0	MBERZELF12	MBERZELF3	MBERZELF4	MBERZELF5
	MBERBOER0	MBERBOER1	MBERBOER2	MBERBOER3	MBERBOER4	MBERBOER5	MBERBOER689	MBERMIDD01
	MBERMIDD23	MBERMIDD4	MBERMIDD5	MBERMIDD6	MBERMIDD7	MBERMIDD8	MBERMIDD9	MBERARBG01
MBERARBG2	MBERARBG3	MBERARBG45	MBERARBG6	MBERARBG7	MBERARBG8	MBERARBG9	MBERARBO0	
MBERARBO1	MBERARBO23	MBERARBO45	MBERARBO6	MBERARBO78	MBERARBO9	MSKA0	MSKA12	MSKA3	
MSKA4	MSKA5	MSKA6	MSKA7	MSKA8	MSKA9	MSKB101	MSKB12	MSKB13	MSKB14	MSKB15	MSKB16
	MSKB17	MSKB18	MSKB19	MSKB20	MSKB212	MSKB23	MSKB24	MSKB25	MSKB26	MSKB278	MSKB29	MSKC0	
	MSKC1	MSKC2	MSKC3	MSKC45	MSKC6	MSKC7	MSKC8	MSKC9	MAUT101	MAUT12	MAUT134	MAUT15
	MAUT16	MAUT17	MAUT18	MAUT19	MAUT201	MAUT22	MAUT23	MAUT24	MAUT25	MAUT26	MAUT00	MAUT01
	MAUT02	MAUT03	MAUT04	MAUT05	MAUT06	MAUT0789	MINKM300	MINKM3012	MINKM303	
	MINKM304	MINKM305	MINKM306	MINKM307	MINKM308	MINKM309	MINK457501	MINK45752
	MINK45753	MINK45754
	MINK45755	MINK45756	MINK45757	MINK45758	MINK45759	MINK75120	MINK75121	MINK751223
	MINK75124	MINK75125	MINK751268	MINK75129	MKOOPKLA12	MKOOPKLA3	MKOOPKLA45	MKOOPKLA6
	MKOOPKLA7	MKOOPKLA8	PWABEDR0	PWABEDR2	PWABEDR3	PWABEDR45	PTRACTOR0	PTRACTOR3
	PTRACTOR4	PTRACTOR56	PZEILPL01	PZEILPL2	PPLEZIER0	PPLEZIER123	PPLEZIER4	PPLEZIER6	
	MINKM301	MINKM302	MINKM3034	ALEVEN0	ALEVEN1	ALEVEN2	ALEVEN34
/selection=backward sls=0.0001;  
run;  

/*forward*/
proc logistic data=final4 descending;
weight splitwgt;
model 
CARAVAN=MOSTYPE	MAANTHUI	MGEMOMV	MOSHOOFD	MRELOV	MFGEKIND	MOPLLAAG	MSKD	MHHUUR	
MHKOOP	MZFONDS	MZPART	MINK3045	MINK123M	MINKGEM	PWAPART	PWALAND	PPERSAUT	PMOTSCO	PAANHANG
	PBROM	PLEVEN	PGEZONG	PWAOREG	PBRAND	PFIETS	PINBOED	PBYSTAND	AWAPART	AWALAND	APERSAUT
	AMOTSCO	AAANHANG	ATRACTOR	ABROM	AGEZONG	AWAOREG	ABRAND	AZEILPL	APLEZIER	AFIETS
	AINBOED	ABYSTAND	MGEMLEEF1	MGEMLEEF2	MGEMLEEF34	MGEMLEEF5	MGEMLEEF6	MGODRK0	MGODRK1
	MGODRK2	MGODRK34	MGODRK5	MGODRK6	MGODRK7	MGODRK9	MGODPR01	MGODPR2	MGODPR34	
	MGODPR5	MGODPR6	MGODPR7	MGODPR8	MGODPR9	MGODOV0	MGODOV1	MGODOV23	MGODOV4	MGODOV5	MGODGE0	
	MGODGE1	MGODGE2	MGODGE3	MGODGE45	MGODGE6	MGODGE7	MGODGE8	MRELGE0	MRELGE1	MRELGE2	MRELGE3	
	MRELGE4	MRELGE5	MRELGE67	MRELGE8	MRELGE9	MRELSA0	MRELSA12	MRELSA3	MRELSA4	MRELSA56
	MFALLEEN01	MFALLEEN2	MFALLEEN3	MFALLEEN45	MFALLEEN6	MFALLEEN7	MFALLEEN8	MFALLEEN9
	MFWEKIND0	MFWEKIND1	MFWEKIND23	MFWEKIND4	MFWEKIND5	MFWEKIND6	MFWEKIND7	MFWEKIND8
	MFWEKIND9	MOPLHOOG01	MOPLHOOG2	MOPLHOOG3	MOPLHOOG4	MOPLHOOG5	MOPLHOOG6	MOPLHOOG7
	MOPLHOOG8	MOPLHOOG9	MOPLMIDD0	MOPLMIDD1	MOPLMIDD234	MOPLMIDD5	MOPLMIDD6	MOPLMIDD7
	MOPLMIDD8	MOPLMIDD9	MBERHOOG01	MBERHOOG2	MBERHOOG3	MBERHOOG4	MBERHOOG5	MBERHOOG6
	MBERHOOG7	MBERHOOG8	MBERHOOG9	MBERZELF0	MBERZELF12	MBERZELF3	MBERZELF4	MBERZELF5
	MBERBOER0	MBERBOER1	MBERBOER2	MBERBOER3	MBERBOER4	MBERBOER5	MBERBOER689	MBERMIDD01
	MBERMIDD23	MBERMIDD4	MBERMIDD5	MBERMIDD6	MBERMIDD7	MBERMIDD8	MBERMIDD9	MBERARBG01
MBERARBG2	MBERARBG3	MBERARBG45	MBERARBG6	MBERARBG7	MBERARBG8	MBERARBG9	MBERARBO0	
MBERARBO1	MBERARBO23	MBERARBO45	MBERARBO6	MBERARBO78	MBERARBO9	MSKA0	MSKA12	MSKA3	
MSKA4	MSKA5	MSKA6	MSKA7	MSKA8	MSKA9	MSKB101	MSKB12	MSKB13	MSKB14	MSKB15	MSKB16
	MSKB17	MSKB18	MSKB19	MSKB20	MSKB212	MSKB23	MSKB24	MSKB25	MSKB26	MSKB278	MSKB29	MSKC0	
	MSKC1	MSKC2	MSKC3	MSKC45	MSKC6	MSKC7	MSKC8	MSKC9	MAUT101	MAUT12	MAUT134	MAUT15
	MAUT16	MAUT17	MAUT18	MAUT19	MAUT201	MAUT22	MAUT23	MAUT24	MAUT25	MAUT26	MAUT00	MAUT01
	MAUT02	MAUT03	MAUT04	MAUT05	MAUT06	MAUT0789	MINKM300	MINKM3012	MINKM303	
	MINKM304	MINKM305	MINKM306	MINKM307	MINKM308	MINKM309	MINK457501	MINK45752
	MINK45753	MINK45754
	MINK45755	MINK45756	MINK45757	MINK45758	MINK45759	MINK75120	MINK75121	MINK751223
	MINK75124	MINK75125	MINK751268	MINK75129	MKOOPKLA12	MKOOPKLA3	MKOOPKLA45	MKOOPKLA6
	MKOOPKLA7	MKOOPKLA8	PWABEDR0	PWABEDR2	PWABEDR3	PWABEDR45	PTRACTOR0	PTRACTOR3
	PTRACTOR4	PTRACTOR56	PZEILPL01	PZEILPL2	PPLEZIER0	PPLEZIER123	PPLEZIER4	PPLEZIER6	
	MINKM301	MINKM302	MINKM3034	ALEVEN0	ALEVEN1	ALEVEN2	ALEVEN34
/selection=forward sle=0.0001;  
run;  
 
/*score*/
proc logistic data=final4 descending;
weight splitwgt;
model CARAVAN= MOPLHOOG8
PPERSAUT PPLEZIER4 MOPLHOOG2
AWAOREG AZEILPL MSKB17
MFWEKIND8 MSKB19 PBRAND
MSKB13 MINKM302 PFIETS MOPLLAAG MHKOOP
AFIETS MSKC1 MINKM308
/selection=score best=2 ;  
run;  
 
/*최종모형적합*/
proc logistic data=final4 descending;
weight splitwgt;
model CARAVAN=MOPLHOOG8 
PPERSAUT PPLEZIER4 MOPLHOOG2  AWAOREG AZEILPL MSKB17  MFWEKIND8 MSKB19 PBRAND
MSKB13  MINKM302  MOPLLAAG  MHKOOP  AFIETS MSKC1 MINKM308
;
output out=m_out pred=pred;
run;  

proc sort data=m_out;
by descending pred;
run;   

proc univariate data=m_out(where=(splitwgt^=.)) noprint;
weight splitwgt;
var pred CARAVAN;
output out=preddata sumwgt=sumwgt;
run;  

